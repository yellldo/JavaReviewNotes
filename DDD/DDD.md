## DDD

> DDD和传统MVC不同，DDD分为四层分别是基础设施层、领域层、应用层、界面层
>
> 统一基础概念：实体、领域服务、防腐层、仓库、工程、值对象、聚合根等

### 基础设施层（Infrastructure）

> 业务与数据分离。为领域层提供持久化机制，为其他层提供通用技术能力。

### 领域层（Domain）

> 这一层是整个软件的核心，纯粹表达业务能力，不需要任何外部依赖。

#### 实体（Entity）

> 实体是一个在业务领域有着唯一标识的对象。对象有属性和状态，有业务行为，其业务行为会影响他的属性和状态
>
> 举个栗子，当我们希望对每一个用户进行管理时，他应该被设计为实体，有唯一编号作为标识，有姓名、性别、余额等属性，有用户状态，有消费行为。当他消费时，他的账户余额可能会发生改变。

#### 值对象（Value Object）

> 用于描述没有唯一标识的对象。

#### 领域事件（Domain Event）

> 简单来说，实体触发事件，实体绑定事件。
>
> 用户的消费行为会触发消费事件；当时间发生时，用户的账户余额会发生改变。

#### 仓储（Repository）

> 仓储类似于传统三层架构的DAO接口，但只是接口，不包含实现。
>
> 仓储提高了系统的健壮性，开发人员可以不关心仓储的实现逻辑，行为等，如果Mybatis更换为Hibernate，对调用方没有影响。

### 应用层（Application）

> 应用层的主要组件就是Service，其粒度与传统三层架构的Service一致。差别在于，传统三层架构的Service层负责业务逻辑处理，而领域模式三层架构的Service只负责将业务委派给领域对象进行处理。只依赖与领域层

### 用户层（Interfaces）

> 负责所以与外部系统的交互，解释用户请求，返回用户响应。只依赖于应用层。

#### 数据传输对象（DTO）

> 因为领域对象不适合暴露给用户，因为需要在返回给用户之前，重新封装为DTO，只暴露我们希望暴露的内容。同时，DTO还有减少请求的次数、简化传输对象、避免代码复用等作用。

#### 装配（Assember）

> 字面含义，负责DTO与领域对象的转换。

#### 外观（Facade）

> Facade是外观模式的践行者，作用与传统三层架构的Controller相似，负责将一个或多个Service方法组合起来，然后封装为一个接口提供给外部系统。他本身不处理任何业务逻辑。